// SPDX-FileCopyrightText: 2024 Seal, Inc
// SPDX-License-Identifier: Apache-2.0

// Code generated by "walrus", DO NOT EDIT.


// This file was autogenerated by go-to-protobuf. Do not edit it manually!

syntax = "proto2";

package github.com.seal_io.walrus.pkg.apis.walrusutil.v1;

import "k8s.io/apimachinery/pkg/apis/meta/v1/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/schema/generated.proto";

// Package-wide variables from generator "generated".
option go_package = "github.com/seal-io/walrus/pkg/apis/walrusutil/v1";

// ScheduleTask is the schema for the scheduletasks API.
//
// +genclient
// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object
// +k8s:crd-gen:resource:scope="Namespaced",subResources=["status"]
message ScheduleTask {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional ScheduleTaskSpec spec = 2;

  optional ScheduleTaskStatus status = 3;
}

// ScheduleTaskList holds the list of ScheduleTask.
//
// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object
message ScheduleTaskList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated ScheduleTask items = 2;
}

// ScheduleTaskSpec defines the desired state of ScheduleTask.
message ScheduleTaskSpec {
  // Schedule is a schedule to run the task in Cron format,
  // see https://en.wikipedia.org/wiki/Cron.
  optional string schedule = 1;

  // Suspend, when set to true, prevents new task from starting,
  // it does not affect already started task.
  optional bool suspend = 2;

  // Await is a flag that, when set to true,
  // indicates that the task should wait until the scheduled time to execute when creating the scheduled task.
  optional bool await = 3;

  // TimeZone specifies the timezone used for calculating the cron schedule,
  // if not provided, the default is the local time of the machine,
  // see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones.
  optional string timeZone = 4;

  // ActiveTaskDeadlineSeconds specifies the active task timeout duration in seconds,
  // if not specified, the default timeout is three times the schedule interval, with a maximum timeout of 6 hours.
  optional int64 activeTaskDeadlineSeconds = 5;
}

// ScheduleTaskStatus defines the observed state of ScheduleTask.
message ScheduleTaskStatus {
  // Schedule is the current schedule to run the task in Cron format,
  // see https://en.wikipedia.org/wiki/Cron.
  optional string schedule = 1;

  // ActiveTaskName is the currently running task names.
  optional string activeTaskName = 2;

  // ActiveTaskTimeoutTime is the time currently running task timeout.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time activeTaskTimeoutTime = 3;

  // LastScheduleTime is the last time the task was successfully scheduled.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScheduleTime = 4;

  // LastSuccessfulTime is the last time the task successfully completed.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastSuccessfulTime = 5;

  // LastFailedTime is the last time the task failed.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastFailedTime = 6;

  // LastFailedMessage is the last error message of the failed task.
  optional string lastFailedMessage = 7;
}

